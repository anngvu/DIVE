colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = ~text,
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.3),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.4),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.5),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.6),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = ~text,
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.1),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.1),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.1),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.1),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = ~text,
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.21),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.21),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.21),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.1),
showlegend = F)
p
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.21),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.15),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.21),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.18),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.25),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.12),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~(count * 2),
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.1),
showlegend = F)
p
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p
NAnodes
npod.graph <- copy(npod)
# all dimensions to be rescaled 1-100
npod.graph[, GADA.pos := factor(GADA.pos, labels = c("", "G", "-"), exclude = NULL)]
npod.graph[, IA2A.pos := factor(IA2A.pos, labels = c("", "I", "-"), exclude = NULL)]
npod.graph[, mIAA.pos := factor(mIAA.pos, labels = c("", "M", "-"), exclude = NULL)]
npod.graph[, ZnT8A.pos := factor(ZnT8A.pos, labels = c("", "Z", "-"), exclude = NULL)]
npod.graph[, Aab.combn := paste0(GADA.pos, IA2A.pos, mIAA.pos, ZnT8A.pos)]
npod.graph[, Aab.combn := factor(Aab.combn, levels = aab.levels)]
npod.graph$Aab.combn
npod.graph <- npod.graph[, .(ID, donor.type, sex, BMI, race, age, age.onset, db.duration, Aab.combn, AutoAb.count, Cpeptide, peak.gluc, HbA1c)]
ref <- melt(npod.graph, id.vars = c("ID", "donor.type"))
npod.graph[, sex := as.numeric(factor(sex, levels = c("Male", "Female"))) * 33]
npod.graph[, race := as.numeric(factor(race,
levels = c("Caucasian", "Hispanic.Latino", "Multiracial", "AfricanAmerican", "Asian",
"AmericanIndian.AlaskaNative"))) * 14]
npod.graph[, AutoAb.count := AutoAb.count * 25]
npod.graph[, Cpeptide := Cpeptide * 2]
npod.graph[, peak.gluc := peak.gluc/20]
npod.graph[, HbA1c := HbA1c * 7]
npod.graph[, BMI := BMI * 1.9]
for(x in c("race", "BMI", "db.duration", "age.onset" ,"Cpeptide", "HbA1c", "peak.gluc", "Aab.combn", "AutoAb.count")) {
npod.graph[is.na(npod.graph[[x]]), (x) := -30]
}
npod.graph[, Aab.combn := as.numeric(Aab.combn) * 6]
npod.graph <- melt(npod.graph, id.vars = c("ID", "donor.type"))
npod.graph$text <- ref[, "value"]
npod.graph
npod.graph <- copy(npod)
# all dimensions to be rescaled 1-100
npod.graph[, GADA.pos := factor(GADA.pos, labels = c("", "G", "-"), exclude = NULL)]
npod.graph[, IA2A.pos := factor(IA2A.pos, labels = c("", "I", "-"), exclude = NULL)]
npod.graph[, mIAA.pos := factor(mIAA.pos, labels = c("", "M", "-"), exclude = NULL)]
npod.graph[, ZnT8A.pos := factor(ZnT8A.pos, labels = c("", "Z", "-"), exclude = NULL)]
npod.graph[, Aab.combn := paste0(GADA.pos, IA2A.pos, mIAA.pos, ZnT8A.pos)]
aab.levels <- c("", c("G", "I", "M", "Z"), apply(combn(c("G", "I", "M", "Z"), 2), 2, paste0, collapse = ""),
apply(combn(c("G", "I", "M", "Z"), 3), 2, paste0, collapse = ""), "GIMZ")
npod.graph[, Aab.combn := factor(Aab.combn, levels = aab.levels)]
npod.graph <- npod.graph[, .(ID, donor.type, sex, BMI, race, age, age.onset, db.duration, Aab.combn, AutoAb.count, Cpeptide, peak.gluc, HbA1c)]
ref <- melt(npod.graph, id.vars = c("ID", "donor.type"))
names(npod.graph)
npod.graph[, sex := as.numeric(factor(sex, levels = c("Male", "Female"))) * 33]
npod.graph[, race := as.numeric(factor(race,
levels = c("Caucasian", "Hispanic.Latino", "Multiracial", "AfricanAmerican", "Asian",
"AmericanIndian.AlaskaNative"))) * 14]
npod.graph[, AutoAb.count := AutoAb.count * 25]
npod.graph[, Cpeptide := Cpeptide * 2]
npod.graph[, peak.gluc := peak.gluc/20]
npod.graph[, HbA1c := HbA1c * 7]
npod.graph[, BMI := BMI * 1.9]
seq_along(npod.graph)
for(x in names(npod.graph)) {
npod.graph[is.na(npod.graph[[x]]), (x) := -30]
}
npod.graph <- copy(npod)
# all dimensions to be rescaled 1-100
npod.graph[, GADA.pos := factor(GADA.pos, labels = c("", "G", "-"), exclude = NULL)]
npod.graph[, IA2A.pos := factor(IA2A.pos, labels = c("", "I", "-"), exclude = NULL)]
npod.graph[, mIAA.pos := factor(mIAA.pos, labels = c("", "M", "-"), exclude = NULL)]
npod.graph[, ZnT8A.pos := factor(ZnT8A.pos, labels = c("", "Z", "-"), exclude = NULL)]
npod.graph[, Aab.combn := paste0(GADA.pos, IA2A.pos, mIAA.pos, ZnT8A.pos)]
aab.levels <- c("", c("G", "I", "M", "Z"), apply(combn(c("G", "I", "M", "Z"), 2), 2, paste0, collapse = ""),
apply(combn(c("G", "I", "M", "Z"), 3), 2, paste0, collapse = ""), "GIMZ")
npod.graph[, Aab.combn := factor(Aab.combn, levels = aab.levels)]
npod.graph <- npod.graph[, .(ID, donor.type, sex, BMI, race, age, age.onset, db.duration, Aab.combn, AutoAb.count, Cpeptide, peak.gluc, HbA1c)]
ref <- melt(npod.graph, id.vars = c("ID", "donor.type"))
# Convert to coordinates
npod.graph[, sex := as.numeric(factor(sex, levels = c("Male", "Female"))) * 33]
npod.graph[, race := as.numeric(factor(race,
levels = c("Caucasian", "Hispanic.Latino", "Multiracial", "AfricanAmerican", "Asian",
"AmericanIndian.AlaskaNative"))) * 14]
npod.graph[, Aab.combn := as.numeric(Aab.combn) * 6]
npod.graph[, AutoAb.count := AutoAb.count * 25]
npod.graph[, Cpeptide := Cpeptide * 2]
npod.graph[, peak.gluc := peak.gluc/20]
npod.graph[, HbA1c := HbA1c * 7]
npod.graph[, BMI := BMI * 1.9]
for(x in names(npod.graph))  npod.graph[is.na(npod.graph[[x]]), (x) := -30]
npod.graph <- melt(npod.graph, id.vars = c("ID", "donor.type"))
npod.graph$text <- ref[, "value"]
levels(npod.graph$variable) <- c("Sex", "BMI", "Race", "Age", "Age at onset", "Disease duration",
"Autoantibody-positive combination", "Autoantibody count", "C-peptide", "Peak glucose", "HbA1C")
NAnodes <- npod.graph[, .(y = -30, count = table(is.na(text))["TRUE"]), by = "variable"]
sexnodes <- npod.graph[variable == "Sex", .(x = unique(variable), y = unique(value), count = length(value)), by = "text"][order(y)]
racenodes <- npod.graph[variable == "Race", .(x = unique(variable), y = unique(value), count = length(value)), by = "text"][!is.na(text)][order(y)]
aabnodes <- npod.graph[variable == "Autoantibody-positive combination", .(x = unique(variable), y = unique(value), count = length(value)),
by = "text"][!is.na(text)][order(y)]
aabcnodes <- npod.graph[variable == "Autoantibody count", .(x = unique(variable), y = unique(value), count = length(value)),
by = "text"][!is.na(text)][order(y)]
p <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text",
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
p <- p %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
p <- p %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p <- p %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.2),
showlegend = F)
p
save(p, file = "npodgraph.Rdata")
p
save(npod.graph, NAnodes, sexnodes, racenodes, aabnodes, aabcnodes, file = "npodgraph.Rdata")
save(p, file = "npodgraph.Rdata")
save(npod.graph, NAnodes, sexnodes, racenodes, aabnodes, aabcnodes, file = "npodgraph.Rdata")
save(npod.graph, lines, NAnodes, sexnodes, racenodes, aabnodes, aabcnodes, file = "npodgraph.Rdata")
save(npod.graph, ax, lines, NAnodes, sexnodes, racenodes, aabnodes, aabcnodes, file = "npodgraph.Rdata")
save(p, file = "npodgraph.Rdata")
npodgraph <- npod.graph %>% group_by(ID) %>% plot_ly(x = ~variable, y = ~value, hoverinfo = "text", height = 500,
colors = c(ppColors, "Pending" = "gray", "Pregnancy" = "pink", "Transplant" = "darkseagreen4")) %>%
add_lines(color = ~donor.type, alpha = 0.3) %>%
layout(xaxis = ax, yaxis = c(ax, showticklabels = F), shapes = lines, plot_bgcolor = "white")
npodgraph <- npodgraph %>% add_trace(data = NAnodes, type = "scatter", mode = "markers",
name = "Not applicable/Not available", x = ~variable, y = ~y, size = ~count,
text = ~paste(variable, "|", count, "NA"), hoverinfo = "text",
marker = list(color = "black", sizeref = 0.2))
npodgraph <- npodgraph %>% add_trace(data = sexnodes, type = "scatter", mode = "markers",
name = "Sex", x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("turquoise", "hotpink"), sizeref = 0.2),
showlegend = F)
npodgraph <- npodgraph %>% add_trace(data = racenodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("white", "orange", "gray", "saddlebrown", "yellow", "indianred", "springgreen"), sizeref = 0.2),
showlegend = F)
npodgraph <- npodgraph %>% add_trace(data = aabnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste(text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", rep("#2A788EFF", 4), rep("#22A884FF", 5), rep("#7AD151FF", 4), "#FDE725FF"), sizeref = 0.2),
showlegend = F)
npodgraph <- npodgraph %>% add_trace(data = aabcnodes, type = "scatter", mode = "markers",
x = ~x, y = ~y, size = ~count,
text = ~paste("positive for", text, "| n =", count), hoverinfo = "text",
marker = list(color = c("#440154FF", "#2A788EFF", "#22A884FF", "#7AD151FF", "#FDE725FF"), sizeref = 0.2),
showlegend = F)
save(npodgraph, file = "npodgraph.Rdata")
shiny::runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
runApp('~/introjs_test')
